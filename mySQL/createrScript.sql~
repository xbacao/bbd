-- -----------------------------------------------------
-- Schema bagodb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `bagodb` DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ;
USE `bagodb` ;

-- -----------------------------------------------------
-- Table `bagodb`.`User`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `bagodb`.`User` ;

CREATE TABLE IF NOT EXISTS `bagodb`.`User` (
  `idUser` INT NOT NULL,
  `email` VARCHAR(45) NULL,
  `password` VARCHAR(45) NULL,
  `creatDate` DATETIME NULL,
  `lasLogin` DATETIME NULL,
  `status` TINYINT(1) NULL,
  PRIMARY KEY (`idUser`)
)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `bagodb`.`Field`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `bagodb`.`Field` ;

CREATE TABLE IF NOT EXISTS `bagodb`.`Field` (
  `idField` INT NOT Null,
  `user_idUser` INT NOT NULL,
  `name` VARCHAR(45) NULL,
  `area` INT NULL COMMENT '',
  `description` VARCHAR(45) NULL,
  `status` INT NULL,
  PRIMARY KEY (`idField`),
  INDEX `fk_Field_User_idx` (`user_idUser` ASC),
  
  CONSTRAINT `fk_Field_User`
    FOREIGN KEY (`user_idUser`)
    REFERENCES `bagodb`.`User` (`idUser`)
)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `bagodb`.`Sensor`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `bagodb`.`Sensor` ;

CREATE TABLE IF NOT EXISTS `bagodb`.`Sensor` (
  `idSensor` INT NOT NULL,
  `type` INT NULL,
  `description` VARCHAR(45) NULL,
  `status` INT NULL,
  PRIMARY KEY (`idSensor`) 
)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `bagodb`.`Field_has_Sensor`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `bagodb`.`Field_has_Sensor` ;

CREATE TABLE IF NOT EXISTS `bagodb`.`Field_has_Sensor` (
  `field_idField` INT NOT NULL,
  `sensor_idSensor` INT NOT NULL,
  PRIMARY KEY (`field_idField`, `sensor_idSensor`),
  INDEX `fk_Field_has_Sensor_Sensor1_idx` (`sensor_idSensor` ASC),
  INDEX `fk_Field_has_Sensor_Field1_idx` (`field_idField` ASC),
  
  CONSTRAINT `fk_Field_has_Sensor_Field1`
    FOREIGN KEY (`field_idField`)
    REFERENCES `bagodb`.`Field` (`idField`),

  CONSTRAINT `fk_Field_has_Sensor_Sensor1`
    FOREIGN KEY (`sensor_idSensor`)
    REFERENCES `bagodb`.`Sensor` (`idSensor`),
)
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `bagodb`.`Reading`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `bagodb`.`Reading` ;

CREATE TABLE IF NOT EXISTS `bagodb`.`Reading` (
  `idReading` INT NOT NULL,
  `Sensor_idSensor` INT NOT NULL,
  `value` INT NULL,
  `dateTime` DATETIME NULL,
  PRIMARY KEY (`idReading`),
  INDEX `fk_Reading_Sensor1_idx` (`Sensor_idSensor` ASC),
  
  CONSTRAINT `fk_Reading_Sensor1`
    FOREIGN KEY (`Sensor_idSensor`)
    REFERENCES `bagodb`.`Sensor` (`idSensor`),
)
ENGINE = InnoDB;
